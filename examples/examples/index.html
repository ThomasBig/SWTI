<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="../../img/favicon.ico">

    
    <title>More examples - SWTI Documentation</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">
    <link href="../../css/highlight.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="../..">SWTI Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../hello/">Hello world</a>
</li>

                        
                            
<li >
    <a href="../arcade/">Arcade game</a>
</li>

                        
                            
<li class="active">
    <a href="./">More examples</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Wiki <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../wiki/cursor/">Cursor</a>
</li>

                        
                            
<li >
    <a href="../../wiki/keyboard/">Keyboard</a>
</li>

                        
                            
<li >
    <a href="../../wiki/mouse/">Mouse</a>
</li>

                        
                            
<li >
    <a href="../../wiki/window/">Window</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../about/">About</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../arcade/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../../wiki/cursor/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/ThomasBig/SWTI"><i class="fab fa-github"></i> GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#more-examples">More examples</a></li>
            <li class="second-level"><a href="#text-aligment">Text aligment</a></li>
                
            <li class="second-level"><a href="#board-game">Board game</a></li>
                
                <li class="third-level"><a href="#frame">Frame</a></li>
                <li class="third-level"><a href="#chessboard">Chessboard</a></li>
                <li class="third-level"><a href="#pieces">Pieces</a></li>
                <li class="third-level"><a href="#full-code">Full code</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="more-examples">More examples</h1>
<p>Source examples.cpp includes miscellaneous functions that can be useful in
variety games and applications. It includes simple board game and aligned text
printing.</p>
<p><img alt="Animated Screenshot 4" src="../../pictures/examples/more/chessboard.gif" /></p>
<p><img alt="Text Screenshot" src="../../pictures/examples/more/text.png" /></p>
<h2 id="text-aligment">Text aligment</h2>
<p>Let's start with the text. In order to differentiate various aligns, I will
create two enums. One for horizontal align and second for vertical.</p>
<pre><code class="cpp">enum HAlign { LEFT, CENTER, RIGHT };
enum VAlign { TOP, MIDDLE, DOWN };
</code></pre>

<p>My goal is to create function that takes position, string of text and align.
I can calculate vertical align by counting number of new lines in text. That
can be done using std::count from <algorithm> library. So far my function looks
like this. It is missing horizontal align.</p>
<pre><code class="cpp">void printText(int x, int y, std::string text, HAlign halign=LEFT, VAlign valign=TOP);
{
  int xx = 0, yy = 0;
  int cnt = std::count(text.begin(), text.end(), '\n');

  switch (valign)
  {
    case TOP:
      yy = 0; break;
    case MIDDLE:
      yy = cnt / 2; break;
    case DOWN:
      yy = cnt; break;
  }

  Cursor.setPosition(x - xx, y - yy);
  std::cout &lt;&lt; line;
}
</code></pre>

<p>Horizontal align must be done in a loop. Each line will be aligned differently
based on its length and number of tabs. I will count one tab as 7 characters.
For simplicity I will omit other control characters. To parse individual lines
I will use stringstream and function getline likewise reading from file. In
the loop I will print individual lines with their align.</p>
<pre><code class="cpp">void printText(int x, int y, std::string text, HAlign halign=LEFT, VAlign valign=TOP)
{
  int xx = 0, yy = 0;
  std::string line;
  int cnt = std::count(text.begin(), text.end(), '\n');

  switch (valign)
  {
    case TOP:
      yy = 0; break;
    case MIDDLE:
      yy = cnt / 2; break;
    case DOWN:
      yy = cnt; break;
  }

  std::istringstream separate(text);
  while(std::getline(separate, line))
  {
    int tabs = 7 * std::count(line.begin(), line.end(), '\t');

    switch (halign)
    {
      case LEFT:
        xx = 0; break;
      case CENTER:
        xx = (line.length() + tabs - 1) / 2; break;
      case RIGHT:
        xx = line.length() + tabs - 1; break;
    }

    Cursor.setPosition(x - xx, (y++) - yy);
    std::cout &lt;&lt; line;
  }
}
</code></pre>

<p>This screenshot has green text from Hobit and gray anchor point in the middle.</p>
<pre><code class="cpp">Cursor.setColor(LIGHTGREEN);
printText(40, 22, &quot;\&quot;Good Morning!\&quot; said Bilbo, and he meant it.\n \
The sun was shining, and the grass was very green.\n \
But Gandalf looked at him from under long bushy eyebrows\n \
that stuck out further than the brim of his shady hat.&quot;, CENTER, MIDDLE);
Cursor.printChar(40, 22, 'X', GRAY);
</code></pre>

<p><img alt="Text Screenshot" src="../../pictures/examples/more/text.png" /></p>
<h2 id="board-game">Board game</h2>
<p>Board game has two parts, first I will print the grid and chessboard, second
I will track mouse and move pieces if I click on them.</p>
<h3 id="frame">Frame</h3>
<p>Printing of frame, the border of chessboard is simple. I use Cursor.printChar
to draw all 4 borders and special symbols to corners. I use box-drawing
characters to make borders nicer. They are defined in SWTI as abbreviations.
For example, DLINE_UR is an abbreviation for DOUBLE LINE UP RIGHT. Full
function is as follows.</p>
<pre><code class="cpp">void printFrame(int x, int y, int columns, int rows)
{
  Cursor.printChar(x, y, DLINE_UR);
  Cursor.printChar(x, y + rows + 1, DLINE_DR);
  Cursor.printChar(x + columns + 1, y, DLINE_UL);
  Cursor.printChar(x + columns + 1, y + rows + 1, DLINE_DL);

  for (int i = x + 1; i &lt;= x + columns; i++)
  {
    Cursor.printChar(i, y, DLINE_H);
    Cursor.printChar(i, y + rows + 1, DLINE_H);
  }

  for (int i = y + 1; i &lt;= y + rows; i++)
  {
    Cursor.printChar(x, i, DLINE_V);
    Cursor.printChar(x + columns + 1, i, DLINE_V);
  }
}
</code></pre>

<p>For this picture I set YELLOW color using Cursor.setColor and then called
printFrame(0, 0, 35, 17);
<img alt="Screenshot 1" src="../../pictures/examples/more/1.png" /></p>
<h3 id="chessboard">Chessboard</h3>
<p>Printing grid is more difficult it will need two cycles. I need to calculate
size of each square and print its border. Let me start with corners as follows.</p>
<pre><code class="cpp">void printGrid(int x, int y, int cx, int cy, int sx, int sy)
{
  for (int py = 0, rx = x; py &lt;= cy; py++, y += sy + 1)
  {
    for (int px = 0, x = rx; px &lt;= cx; px++, x += sx + 1)
    {
      Cursor.printChar(x, y, LINE_HV);
    }
  }
}
</code></pre>

<p><img alt="Screenshot 2" src="../../pictures/examples/more/2.png" /></p>
<p>Now I need to add borders for each square. This is more tedious because I want
to use special ascii corners. Result is clean without sharp corners.</p>
<pre><code class="cpp">void printGrid(int x, int y, int cx, int cy, int sx, int sy)
{
  int px, py, i, rx = x;
  for (py = 0; py &lt; cy; py++, y += sy + 1)
  {
    for (px = 0, x = rx; px &lt; cx; px++, x += sx + 1)
    {
      if (px == 0 &amp;&amp; py == 0)
        Cursor.printChar(x, y, LINE_UR);
      else if (py == 0)
        Cursor.printChar(x, y, LINE_HD);
      else if (px == 0)
        Cursor.printChar(x, y, LINE_VR);
      else
        Cursor.printChar(x, y, LINE_HV);

      for (i = x + 1; i &lt;= x + sx; i++)
        Cursor.printChar(i, y, LINE_H);

      for (i = y + 1; i &lt;= y + sy; i++)
        Cursor.printChar(x, i, LINE_V);
    }
    Cursor.printChar(x, y, (py == 0) ? LINE_UL : LINE_VL);
    for (i = y + 1; i &lt;= y + sy; i++)
      Cursor.printChar(x, i, LINE_V);
  }
  for (px = 0, x = rx; px &lt; cx; px++, x += sx + 1)
  {
    Cursor.printChar(x, y, (px == 0) ? LINE_DR : LINE_HU);
    for (i = x + 1; i &lt;= x + sx; i++)
      Cursor.printChar(i, y, LINE_H);
  }
  Cursor.printChar(x, y, LINE_DL);
}
</code></pre>

<p><img alt="Screenshot 3" src="../../pictures/examples/more/3.png" /></p>
<h3 id="pieces">Pieces</h3>
<p>Let's add some movable pieces. I will create new class for one piece. Each
piece is defined by its position, character and color. I will add also a state
variable for later.</p>
<pre><code class="cpp">class Piece
{
private:
  int x, y;
  char type;
  Color color;
  int state;
};
</code></pre>

<p>This would be pretty useless class without some methods. I will add two public
constructors and two getters, these getters will be special because they will
return position in window rather than position in chessboard. For example,
if piece position on board is x=1 and y=1, position in window will be [8, 4].
Finally I will add show method which takes the cursor to piece position
and prints there a symbol.</p>
<pre><code class="cpp">class Piece
{
public:
  Piece(int x, int y, char type, Color color) :
    x(x), y(y), type(type), color(color), state(0) { show(); }
  Piece() : Piece(0, 0, 'X', WHITE) {}
  int getColumns()
    { return 4 + x * 4; }
  int getRows()
    { return 2 + y * 2; }
  void show()
    {  Cursor.printChar(getColumns(), getRows(), type, color); }
  void drag();
};
</code></pre>

<p>Lastly I will add drag method. This method is most complex because it behaves
differently based on state variable. If state is 0, piece stays on its position.
If state is 1, piece is being moved. To get mouse position I will call
Mouse.getColumns() and Mouse.getRows(). To get left mouse button I will use
Keyboard. I will also add absolute value to form a threshold, if user presses
left button in same square but not necessary on piece location. I also need
to prevent putting piece outside board or in the wrong square position.</p>
<pre><code class="cpp">void Piece::drag()
{
  if (Keyboard.getPressed(VK_LBUTTON) &amp;&amp; abs(Mouse.getColumns() - getColumns()) &lt; 3  \
   &amp;&amp; abs(Mouse.getRows() - getRows()) &lt; 2)
    state = 1;
  if (state == 1 &amp;&amp; !Keyboard.getReleased(VK_LBUTTON))
  {
    Cursor.printBlank(getColumns(), getRows());
    x = (Mouse.getColumns() - 3) / 4; y = (Mouse.getRows() - 2) / 2;
    x = (std::min)((std::max)(x, 0), 7); y = (std::min)((std::max)(y, 0), 7);
    Cursor.printChar(getColumns(), getRows(), type, LIGHTYELLOW);
  }
  else if (state == 1)
  {
    state = 0;
  }
}
</code></pre>

<p>In main I will add individual pieces on board. I will also hide annoying
blinking and selection. Without Window.hideSelection() clicking to console
would select the text which is not what we want. Lastly, I need to loop through
all pieces, show them and drag them. To continue making games, check out
<a href="../arcade/">arcade game</a>.</p>
<pre><code class="cpp">int main()
{
  Window.hideBlinking();
  Window.hideSelection();

  Cursor.setColor(YELLOW);
  printFrame(0, 0, 35, 17);
  Cursor.setColor(WHITE);
  printGrid(2, 1, 8, 8, 3, 1);

  Piece pieces[4] = {
    Piece(2, 2, 'X', LIGHTRED),
    Piece(2, 5, 'Y', LIGHTRED),
    Piece(5, 2, 'X', LIGHTBLUE),
    Piece(5, 5, 'Y', LIGHTBLUE)
  };

  while(!Keyboard.get(VK_ESCAPE))
  {
    for (auto&amp; piece: pieces)
      piece.show();
    for (auto&amp; piece: pieces)
      piece.drag();
    Keyboard.wait(30);
  }
}
</code></pre>

<p><img alt="Animated Screenshot 4" src="../../pictures/examples/more/chessboard.gif" /></p>
<h3 id="full-code">Full code</h3>
<p>Code for board game is following. On the <a href="https://github.com/ThomasBig/SWTI/">github</a>
you can find similar code for these examples.</p>
<pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;algorithm&gt;
#include &quot;swti/swti.hpp&quot;

void printFrame(int x, int y, int columns, int rows)
{
  Cursor.printChar(x, y, DLINE_UR);
  Cursor.printChar(x, y + rows + 1, DLINE_DR);
  Cursor.printChar(x + columns + 1, y, DLINE_UL);
  Cursor.printChar(x + columns + 1, y + rows + 1, DLINE_DL);

  for (int i = x + 1; i &lt;= x + columns; i++)
  {
    Cursor.printChar(i, y, DLINE_H);
    Cursor.printChar(i, y + rows + 1, DLINE_H);
  }

  for (int i = y + 1; i &lt;= y + rows; i++)
  {
    Cursor.printChar(x, i, DLINE_V);
    Cursor.printChar(x + columns + 1, i, DLINE_V);
  }
}

void printGrid(int x, int y, int cx, int cy, int sx, int sy)
{
  int px, py, i, rx = x;
  for (py = 0; py &lt; cy; py++, y += sy + 1)
  {
    for (px = 0, x = rx; px &lt; cx; px++, x += sx + 1)
    {
      if (px == 0 &amp;&amp; py == 0)
        Cursor.printChar(x, y, LINE_UR);
      else if (py == 0)
        Cursor.printChar(x, y, LINE_HD);
      else if (px == 0)
        Cursor.printChar(x, y, LINE_VR);
      else
        Cursor.printChar(x, y, LINE_HV);

      for (i = x + 1; i &lt;= x + sx; i++)
        Cursor.printChar(i, y, LINE_H);

      for (i = y + 1; i &lt;= y + sy; i++)
        Cursor.printChar(x, i, LINE_V);
    }
    Cursor.printChar(x, y, (py == 0) ? LINE_UL : LINE_VL);
    for (i = y + 1; i &lt;= y + sy; i++)
      Cursor.printChar(x, i, LINE_V);
  }
  for (px = 0, x = rx; px &lt; cx; px++, x += sx + 1)
  {
    Cursor.printChar(x, y, (px == 0) ? LINE_DR : LINE_HU);
    for (i = x + 1; i &lt;= x + sx; i++)
      Cursor.printChar(i, y, LINE_H);
  }
  Cursor.printChar(x, y, LINE_DL);
}

class Piece
{
private:
  int x, y;
  char type;
  Color color;
  int state;
public:
  Piece(int x, int y, char type, Color color) :
    x(x), y(y), type(type), color(color), state(0) { show(); }
  Piece() : Piece(0, 0, 'X', WHITE) {}
  int getColumns()
    { return 4 + x * 4; }
  int getRows()
    { return 2 + y * 2; }
  void show()
    {  Cursor.printChar(getColumns(), getRows(), type, color); }
  void drag();
};

void Piece::drag()
{
  if (Keyboard.getPressed(VK_LBUTTON) &amp;&amp; abs(Mouse.getColumns() - getColumns()) &lt; 3  \
   &amp;&amp; abs(Mouse.getRows() - getRows()) &lt; 2)
    state = 1;
  if (state == 1 &amp;&amp; !Keyboard.getReleased(VK_LBUTTON))
  {
    Cursor.printBlank(getColumns(), getRows());
    x = (Mouse.getColumns() - 3) / 4; y = (Mouse.getRows() - 2) / 2;
    x = (std::min)((std::max)(x, 0), 7); y = (std::min)((std::max)(y, 0), 7);
    Cursor.printChar(getColumns(), getRows(), type, LIGHTYELLOW);
  }
  else if (state == 1)
  {
    state = 0;
  }
}

int main()
{
  Window.hideBlinking();
  Window.hideSelection();

  Cursor.setColor(YELLOW);
  printFrame(0, 0, 35, 17);
  Cursor.setColor(WHITE);
  printGrid(2, 1, 8, 8, 3, 1);

  Piece pieces[4] = {
    Piece(2, 2, 'X', LIGHTRED),
    Piece(2, 5, 'Y', LIGHTRED),
    Piece(5, 2, 'X', LIGHTBLUE),
    Piece(5, 5, 'Y', LIGHTBLUE)
  };

  while(!Keyboard.get(VK_ESCAPE))
  {
    for (auto&amp; piece: pieces)
      piece.show();
    for (auto&amp; piece: pieces)
      piece.drag();
    Keyboard.wait(30);
  }
}
</code></pre></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>

        
        
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
